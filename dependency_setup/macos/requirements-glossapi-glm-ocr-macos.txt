# GLM-OCR profile (macOS MLX/MPS)
# Self-contained — does NOT include vanilla-macos to avoid transformers<5 and
# huggingface_hub<1 pins that conflict with mlx-vlm>=0.3.12 requirements.
#
# Docling is installed separately with --no-deps by setup_glossapi.sh so its
# transitive constraints don't force downgrades.

# ── Build tooling ──
maturin>=1.5,<2.0

# ── Core pipeline deps (same as vanilla, minus docling + conflicting pins) ──
numpy<2
pandas>=1.3.0,<3.0.0
python-dateutil>=2.8.2
pytz>=2021.1
scikit-learn==1.6.1
joblib>=1.0.0
dask>=2022.1.0
pyarrow>=7.0.0
aiohttp>=3.8.0
aiofiles>=23.0.0
ftfy>=6.0.0
tenacity>=8.0.0
tqdm>=4.67.0
pyyaml>=6.0
questionary>=2.0.1
rich>=13.7.1
typer>=0.12.3
pypdfium2>=4.0.0
zstandard>=0.22.0
msgspec>=0.18.6
fpdf2>=2.7.0
cachetools
cbor2
einops
tiktoken
diskcache==5.6.3
lark==1.2.2
lm-format-enforcer==0.11.3
prometheus-fastapi-instrumentator
watchfiles
openai>=1.99.1
gguf>=0.13.0
ray[cgraph]>=2.48.0
numba==0.61.2
mistral_common[audio,image]>=1.8.5
openai-harmony>=0.0.3
xgrammar==0.1.25

# ── Tooling / tests ──
pytest>=8.0
pytest-mock>=3.14
psutil>=5.9

# ── GLM-OCR compatible versions (no upper bounds that conflict with mlx-vlm) ──
safetensors>=0.4
huggingface-hub>=1.0
transformers>=5.1.0

# ── Torch (MPS/Metal) ──
torch>=2.2,<3
torchvision>=0.17,<1

# ── Docling transitive deps (installed --no-deps, so we pin them here) ──
tabulate>=0.9.0,<0.10.0
jsonref>=1.1.0,<2.0.0
latex2mathml>=3.77.0,<4.0.0
pydantic-settings>=2.3.0,<3.0.0
filetype>=1.2.0,<2.0.0
rtree>=1.3.0,<2.0.0
beautifulsoup4>=4.12.3,<5.0.0
lxml>=4.0.0,<6.0.0
marko>=2.1.2,<3.0.0
openpyxl>=3.1.5,<4.0.0
python-docx>=1.1.2,<2.0.0
python-pptx>=1.0.2,<2.0.0
pylatexenc>=2.10,<3.0
opencv-python-headless>=4.6.0.66,<5.0.0.0
accelerate>=1.2.1,<2.0.0

# ── GLM-OCR MLX deps ──
Pillow
packaging
