# MinerU (magic-pdf) environment
#
# Copy this file to .env_mineru and adjust the paths for your machine:
#   cp dependency_setup/.env_mineru.example dependency_setup/.env_mineru
# Then source it before running the pipeline:
#   source dependency_setup/.env_mineru

# ---------------------------------------------------------------------------
# Shared weights root (all backends look under subdirectories here)
# ---------------------------------------------------------------------------
export GLOSSAPI_WEIGHTS_ROOT=/path/to/glossAPI/model_weights

# ---------------------------------------------------------------------------
# OCR control â€” set ENABLE_OCR=1 to run real magic-pdf; ENABLE_STUB controls
# fallback to stub when the CLI fails or is unavailable.
# ---------------------------------------------------------------------------
export GLOSSAPI_MINERU_ENABLE_OCR=1
export GLOSSAPI_MINERU_ENABLE_STUB=0

# ---------------------------------------------------------------------------
# magic-pdf binary location
# Auto-detected via PATH if not set; set explicitly when using a venv.
# ---------------------------------------------------------------------------
export GLOSSAPI_MINERU_COMMAND=/path/to/glossAPI/dependency_setup/.venvs/mineru-py312/bin/magic-pdf

# ---------------------------------------------------------------------------
# Pipeline execution mode: auto | fast | accurate
# ---------------------------------------------------------------------------
export GLOSSAPI_MINERU_MODE=auto

# ---------------------------------------------------------------------------
# Backend engine override: pipeline | hybrid-auto-engine | auto (default)
# auto resolves to hybrid-auto-engine on MPS/CUDA machines and pipeline on CPU.
# ---------------------------------------------------------------------------
# export GLOSSAPI_MINERU_BACKEND=auto

# ---------------------------------------------------------------------------
# Device mode: mps | cuda | cpu  (auto-detected from torch if not set)
# ---------------------------------------------------------------------------
# export GLOSSAPI_MINERU_DEVICE_MODE=mps

# ---------------------------------------------------------------------------
# MinerU tools config JSON.
# Auto-resolved from GLOSSAPI_WEIGHTS_ROOT/mineru/magic-pdf.json if not set.
# Explicit override:
# ---------------------------------------------------------------------------
# export MINERU_TOOLS_CONFIG_JSON=/path/to/glossAPI/model_weights/mineru/magic-pdf.json

# ---------------------------------------------------------------------------
# Skip Docling bootstrap at import time (not needed for MinerU-only runs).
# ---------------------------------------------------------------------------
export GLOSSAPI_SKIP_DOCLING_BOOT=1
